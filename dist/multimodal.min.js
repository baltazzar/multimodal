/**
 * Baltazzar multimodal
 * Vers√£o: 1.0.0-alpha
 * Component description goes here
 * Autor: BaltazZar Team
 */

!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),(b.baltazzar||(b.baltazzar={})).multimodal=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){b.exports={alert:{message:"Mensagem",title:"Aviso",btnOk:{label:"OK",className:"btn-primary"},callbackReturnOk:function(){return!0},className:"",type:"alert"},confirm:{message:"Mensagem",title:"Importante",btnOk:{label:"OK",className:"btn-primary"},callbackReturnOk:function(){return!0},btnCancel:{label:"Cancelar",className:"btn-default"},callbackReturnCancel:function(){return!1},className:"",type:"confirm"},prompt:{message:"Mensagem",title:"",customEl:"",btnOk:{label:"OK",className:"btn-primary"},callbackReturnOk:function(a){return a},btnCancel:{label:"Cancelar",className:"btn-default"},callbackReturnCancel:function(){return null},className:"",type:"prompt"},notify:{ele:"body",type:"info",offset:{from:"top",amount:20},align:"right",width:250,delay:4e3,allow_dismiss:!0,stackup_spacing:10}}},{}],2:[function(a,b){{var c=a("underscore");a("backbone")}Marionette=a("marionette"),jQuery=$=a("jquery"),a("bootstrap");var d=function(){function b(){this.App=null,this.Template=a("./template"),this.Defaults=a("./defaults"),$.fn.modal.Constructor.prototype.enforceFocus=function(){}}return b.prototype.initialize=function(a,b){this.App=a,c.extend(this.Defaults,b)},b.prototype.createModalEl=function(a){if(a=a||"modal",0===$("body #"+a).length){var b='<div class="modal" id="'+a+'" tabindex="-1" role="dialog" aria-labelledby="modal" aria-hidden="true">';$("body").append(b)}},b.prototype.box=function(a,b,d){var e=null,f=d;"string"==typeof a&&(a={message:a}),c.defaults(a,this.Defaults[d]),this.createModalEl(f);var g=parseInt($(".modal.in:last").css("z-index"),10),h=$("body #"+f);h.html(this.Template(a)),h.modal("show"),g&&h.css("z-index",parseInt(g,10)+1e3);var i=function(a){b(e,a),h.unbind("hidden.bs.modal",i)},j=function(){e=a.callbackReturnOk(h.find("#txtPrompt").val()),h.find("#btnOk").unbind("click",j)},k=function(){e=a.callbackReturnCancel(),h.find("#btnCancel").unbind("click",k)},l=function(){h.find("#txtPrompt").focus(),h.unbind("shown.bs.modal",l)};h.find("#btnOk").bind("click",j),h.find("#btnCancel").bind("click",k),h.bind("shown.bs.modal",l),b&&h.bind("hidden.bs.modal",i)},b.prototype.alert=function(a,b){this.box(a,b,"alert")},b.prototype.confirm=function(a,b){this.box(a,b,"confirm")},b.prototype.prompt=function(a,b){this.box(a,b,"prompt")},b.prototype.notify=function(a,b){var d,e,f;switch(b=b||{},console.log(b),console.log(this.Defaults.notify),c.defaults(b,this.Defaults.notify),console.log(b),d=$("<div>"),d.attr("class","bootstrap-growl alert"),b.type&&d.addClass("alert-"+b.type),b.allow_dismiss&&d.append('<span class="close" data-dismiss="alert">&times;</span>'),d.append(a),b.top_offset&&(b.offset={from:"top",amount:b.top_offset}),f=b.offset.amount,$(".bootstrap-growl").each(function(){return Math.max(f,parseInt($(this).css(b.offset.from),10)+$(this).outerHeight()+b.stackup_spacing)}),e={position:"body"===b.ele?"fixed":"absolute",margin:0,"z-index":"9999",display:"none"},e[b.offset.from]=f+"px",d.css(e),"auto"!==b.width&&d.css("width",b.width+"px"),$(b.ele).append(d),b.align){case"center":d.css({left:"50%","margin-left":"-"+d.outerWidth()/2+"px"});break;case"left":d.css("left","20px");break;default:d.css("right","20px")}return d.fadeIn(),b.delay>0&&d.delay(b.delay).fadeOut(function(){return $(this).alert("close")}),d},b.prototype.show=function(a,b,c){if(null===this.App)return console.error("Please use initialize function to add marionette application to multimodal"),!1;b=b||"modal",this.createModalEl(b);var d=Marionette.Region.extend({el:"#"+b,prevIndex:null,initialize:function(){this.on("show",this.showModal,this)},getEl:function(a){var b=$(a),c=this;return b.on("hidden.bs.modal",function(){c.close(),b.remove()}),b},showModal:function(a){var b=parseInt($(".modal.in:last").css("z-index"),10);a.on("close",this.hideModal,this),this.$el.modal({backdrop:"static"}),$(".modal-backdrop:gt(0)").remove();var c=$(".modal-backdrop");b&&(this.$el.css("z-index",b+10),c.css("z-index",parseInt(this.$el.css("z-index"),10)-1))},hideModal:function(){this.$el.modal("hide");var b=parseInt($(".modal.in:last").css("z-index"),10),d=$(".modal-backdrop");d.css("z-index",b-1),c&&c(a.modalReturn)}});this.App.addRegions({modal:d}),this.App.modal.show(a)},b}(),e=new d;b.exports=e},{"./defaults":1,"./template":3}],3:[function(a,b){var c=a("jquery");b.exports=function(a){var b=c('<div class="modal-dialog">'),d=c('<div class="modal-content">').appendTo(b),e=c('<div class="modal-header">').appendTo(d);c('<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>').appendTo(e),c('<h4 class="modal-title '+a.className+'">'+a.title+"</h4>").appendTo(e);var f=c('<div class="modal-body '+a.className+'">').appendTo(d);if("prompt"===a.type){var g=c('<div class="form-group">').appendTo(f);c("<label>"+a.message+"</label>").appendTo(g),"undefined"!=typeof customEl?c(customEl).appendTo(g):c('<input type="text" class="form-control input-sm" id="txtPrompt" placeholder="'+a.placeholder+'">').appendTo(g)}else f.html(a.message);var h=c('<div class="modal-footer '+a.className+'">').appendTo(d);return"alert"!==a.type&&c('<button type="'+("prompt"===a.type?"submit":"button")+'" class="btn '+a.btnCancel.className+'" data-dismiss="modal" id="btnCancel">'+a.btnCancel.label+"</button>").appendTo(h),c('<button type="button" class="btn '+a.btnOk.className+'" data-dismiss="modal" id="btnOK">'+a.btnOk.label+"</button>").appendTo(h),b}},{}]},{},[2])(2)});