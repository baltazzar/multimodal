/**
 * Baltazzar multimodal
 * Versão: 1.1.2
 * A flexible modal component for Bootstrap & Backbone
 * Autor: BaltazZar Team
 */

/**
 * Baltazzar multimodal
 * Versão: 1.1.2
 * A flexible modal component for Bootstrap & Backbone
 * Autor: BaltazZar Team
 */

!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),(b.baltazzar||(b.baltazzar={})).multimodal=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){b.exports={alert:{message:"Mensagem",title:"Aviso",btnOk:{label:"OK",className:"btn-primary"},callbackReturnOk:function(){return!0},className:"",type:"alert"},confirm:{message:"Mensagem",title:"Importante",btnOk:{label:"OK",className:"btn-primary"},callbackReturnOk:function(){return!0},btnCancel:{label:"Cancelar",className:"btn-default"},callbackReturnCancel:function(){return!1},className:"",type:"confirm"},confirmInline:{message:"Confirm Action?",btnOk:{label:"OK",className:"btn-primary"},callbackReturnOk:function(){return!0},btnCancel:{label:"Cancelar",className:"btn-default"},callbackReturnCancel:function(){return!1},className:"",type:"confirmInline"},prompt:{message:"Mensagem",title:"",customEl:"",btnOk:{label:"OK",className:"btn-primary"},callbackReturnOk:function(a){return a},btnCancel:{label:"Cancelar",className:"btn-default"},callbackReturnCancel:function(){return null},className:"",type:"prompt"},notify:{ele:"body",type:"info",offset:{from:"top",amount:20},align:"right",width:250,delay:4e3,allow_dismiss:!0,stackup_spacing:10}}},{}],2:[function(a,b){var c=a("underscore"),d=(a("backbone"),a("marionette"));jQuery=$=a("jquery"),a("bootstrap"),c.merge=c.merge||function(a,b){return c.each(b,function(d,e){c.contains(c.keys(a),e)&&c.isObject(a[e])&&c.isObject(b[e])?c.merge(a[e],b[e]):a[e]=b[e]}),a};var e=function(){function b(){this.App=null,this.Template=a("./template"),this.Defaults=a("./defaults"),$.fn.modal.Constructor.prototype.enforceFocus=function(){}}return b.prototype.initialize=function(a,b){this.App=a,c.merge(this.Defaults,b)},b.prototype.createModalEl=function(a){if(a=a||"modal",0===$("body #"+a).length){var b='<div class="modal" id="'+a+'" tabindex="-1" role="dialog" aria-labelledby="modal" aria-hidden="true">';$("body").append(b)}},b.prototype.box=function(a,b,d){var e=null,f=d+"-"+(new Date).getTime();"string"==typeof a&&(a={message:a}),c.defaults(a,this.Defaults[d]),this.createModalEl(f);var g=parseInt($(".modal.in:last").css("z-index"),10),h=$("body #"+f);h.html(this.Template(a)),h.modal({backdrop:"static"}),$(".modal-backdrop:gt(0)").remove();var i=$(".modal-backdrop");g&&(h.css("z-index",g+10),i.length>0&&i.css("z-index",parseInt(h.css("z-index"),10)-1));var j=function(a){b(e,a),h.unbind("hidden.bs.modal",j)},k=function(){e=a.callbackReturnOk(h.find("#txtPrompt").val()),h.find("#btnOk").unbind("click",k)},l=function(){e=a.callbackReturnCancel(),h.find("#btnCancel").unbind("click",l)},m=function(){h.find("#txtPrompt").focus(),h.unbind("shown.bs.modal",m)};h.find("#btnOk").bind("click",k),h.find("#btnCancel").bind("click",l),h.bind("shown.bs.modal",m),h.bind("hidden.bs.modal",function(){h.remove();var a=parseInt($(".modal.in:last").css("z-index")),b=$(".modal-backdrop");b.css("z-index",a-1)}),b&&h.bind("hidden.bs.modal",j)},b.prototype.alert=function(a,b){this.box(a,b,"alert")},b.prototype.confirm=function(a,b){this.box(a,b,"confirm")},b.prototype.prompt=function(a,b){this.box(a,b,"prompt")},b.prototype.notify=function(a,b){var d,e,f;switch(b=b||{},c.defaults(b,this.Defaults.notify),d=$("<div>"),d.attr("class","bootstrap-growl alert"),b.type&&d.addClass("alert-"+b.type),b.allow_dismiss&&d.append('<span class="close" data-dismiss="alert">&times;</span>'),d.append(a),b.top_offset&&(b.offset={from:"top",amount:b.top_offset}),f=b.offset.amount,$(".bootstrap-growl").each(function(){return f=Math.max(f,parseInt($(this).css(b.offset.from),10)+$(this).outerHeight()+b.stackup_spacing)}),e={position:"body"===b.ele?"fixed":"absolute",margin:0,"z-index":"9999",display:"none"},e[b.offset.from]=f+"px",d.css(e),"auto"!==b.width&&d.css("width",b.width+"px"),$(b.ele).append(d),b.align){case"center":d.css({left:"50%","margin-left":"-"+d.outerWidth()/2+"px"});break;case"left":d.css("left","20px");break;default:d.css("right","20px")}return d.fadeIn(),b.delay>0&&d.delay(b.delay).fadeOut(function(){return $(this).alert("close")}),d},b.prototype.show=function(a,b,c){if(null===this.App)return console.error("Please use initialize function to add marionette application to multimodal"),!1;b=b||"modal",this.createModalEl(b);var e=d.Region.extend({el:"#"+b,prevIndex:null,initialize:function(){this.on("show",this.showModal,this)},getEl:function(a){var b=$(a),c=this;return b.on("hidden.bs.modal",function(){c.close(),b.remove()}),b},showModal:function(a){var b=parseInt($(".modal.in:last").css("z-index"),10);a.on("close",this.hideModal,this),this.$el.modal({backdrop:"static"}),$(".modal-backdrop:gt(0)").remove();var c=$(".modal-backdrop");b&&(this.$el.css("z-index",b+10),c.css("z-index",parseInt(this.$el.css("z-index"),10)-1))},hideModal:function(){this.$el.modal("hide");var b=parseInt($(".modal.in:last").css("z-index"),10),d=$(".modal-backdrop");d.css("z-index",b-1),c&&c(a.modalReturn)}});this.App.addRegions({modal:e}),this.App.modal.show(a)},b.prototype.confirmInline=function(a,b){var c=$(".modal:last").find(".modal-footer").html(),d=this.Defaults.confirmInline,e=a?a:this.Defaults.confirmInline.message,f=['<div class="row">','	<div class="col-md-8">','		<div class="text-info text-left" style="padding:5px;"><strong>'+e+"</strong></div>","	</div>",'	<div class="col-md-4">','		<button class="btn btn-sm btn-success btn-confirmAction" id="true">'+d.btnOk.label+"</button>",'		<button class="btn btn-sm btn-danger btn-confirmAction" id="false">'+d.btnCancel.label+"</button>","	</div>","</div>"];$(".modal:last").find(".modal-footer").html(f.join(" ")),$(".modal:last").find(".modal-footer .btn-success").focus(),$(".btn-confirmAction").on("click",function(a){var d="true"===a.currentTarget.id?!0:!1;$(".modal:last").find(".modal-footer").html(c),b(d)})},b}(),f=new e;b.exports=f},{"./defaults":1,"./template":3}],3:[function(a,b){var c=a("jquery");b.exports=function(a){var b=c('<div class="modal-dialog">'),d=c('<div class="modal-content">').appendTo(b),e=c('<div class="modal-header">').appendTo(d);c('<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>').appendTo(e),c('<h4 class="modal-title '+a.className+'">'+a.title+"</h4>").appendTo(e);var f=c('<div class="modal-body '+a.className+'">').appendTo(d);if("prompt"===a.type){var g=c('<div class="form-group">').appendTo(f);c("<label>"+a.message+"</label>").appendTo(g),"undefined"!=typeof customEl?c(customEl).appendTo(g):c('<input type="text" class="form-control input-sm" id="txtPrompt" placeholder="'+a.placeholder+'">').on("keypress",function(a){13===a.charCode&&c("#btnOK").trigger("click")}).appendTo(g)}else f.html(a.message);var h=c('<div class="modal-footer '+a.className+'">').appendTo(d);return c('<button type="button" class="btn '+a.btnOk.className+'" data-dismiss="modal" id="btnOk">'+a.btnOk.label+"</button>").appendTo(h),"alert"!==a.type&&c('<button type="'+("prompt"===a.type?"submit":"button")+'" class="btn '+a.btnCancel.className+'" data-dismiss="modal" id="btnCancel">'+a.btnCancel.label+"</button>").appendTo(h),b}},{}]},{},[2])(2)});